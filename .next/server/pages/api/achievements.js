"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "pages/api/achievements";
exports.ids = ["pages/api/achievements"];
exports.modules = {

/***/ "(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fachievements&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fachievements.ts&middlewareConfigBase64=e30%3D!":
/*!************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fachievements&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fachievements.ts&middlewareConfigBase64=e30%3D! ***!
  \************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   config: () => (/* binding */ config),\n/* harmony export */   \"default\": () => (__WEBPACK_DEFAULT_EXPORT__),\n/* harmony export */   routeModule: () => (/* binding */ routeModule)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/route-modules/pages-api/module.compiled */ \"(api-node)/./node_modules/next/dist/server/route-modules/pages-api/module.compiled.js\");\n/* harmony import */ var next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/route-kind */ \"(api-node)/./node_modules/next/dist/server/route-kind.js\");\n/* harmony import */ var next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/build/templates/helpers */ \"(api-node)/./node_modules/next/dist/build/templates/helpers.js\");\n/* harmony import */ var _src_pages_api_achievements_ts__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./src/pages/api/achievements.ts */ \"(api-node)/./src/pages/api/achievements.ts\");\n\n\n\n// Import the userland code.\n\n// Re-export the handler (should be the default export).\n/* harmony default export */ const __WEBPACK_DEFAULT_EXPORT__ = ((0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_achievements_ts__WEBPACK_IMPORTED_MODULE_3__, 'default'));\n// Re-export config.\nconst config = (0,next_dist_build_templates_helpers__WEBPACK_IMPORTED_MODULE_2__.hoist)(_src_pages_api_achievements_ts__WEBPACK_IMPORTED_MODULE_3__, 'config');\n// Create and export the route module that will be consumed.\nconst routeModule = new next_dist_server_route_modules_pages_api_module_compiled__WEBPACK_IMPORTED_MODULE_0__.PagesAPIRouteModule({\n    definition: {\n        kind: next_dist_server_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.PAGES_API,\n        page: \"/api/achievements\",\n        pathname: \"/api/achievements\",\n        // The following aren't used in production.\n        bundlePath: '',\n        filename: ''\n    },\n    userland: _src_pages_api_achievements_ts__WEBPACK_IMPORTED_MODULE_3__\n});\n\n//# sourceMappingURL=pages-api.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL25vZGVfbW9kdWxlcy9uZXh0L2Rpc3QvYnVpbGQvd2VicGFjay9sb2FkZXJzL25leHQtcm91dGUtbG9hZGVyL2luZGV4LmpzP2tpbmQ9UEFHRVNfQVBJJnBhZ2U9JTJGYXBpJTJGYWNoaWV2ZW1lbnRzJnByZWZlcnJlZFJlZ2lvbj0mYWJzb2x1dGVQYWdlUGF0aD0uJTJGc3JjJTJGcGFnZXMlMkZhcGklMkZhY2hpZXZlbWVudHMudHMmbWlkZGxld2FyZUNvbmZpZ0Jhc2U2ND1lMzAlM0QhIiwibWFwcGluZ3MiOiI7Ozs7Ozs7Ozs7O0FBQStGO0FBQ3ZDO0FBQ0U7QUFDMUQ7QUFDNEQ7QUFDNUQ7QUFDQSxpRUFBZSx3RUFBSyxDQUFDLDJEQUFRLFlBQVksRUFBQztBQUMxQztBQUNPLGVBQWUsd0VBQUssQ0FBQywyREFBUTtBQUNwQztBQUNPLHdCQUF3Qix5R0FBbUI7QUFDbEQ7QUFDQSxjQUFjLGtFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxLQUFLO0FBQ0wsWUFBWTtBQUNaLENBQUM7O0FBRUQiLCJzb3VyY2VzIjpbIiJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBQYWdlc0FQSVJvdXRlTW9kdWxlIH0gZnJvbSBcIm5leHQvZGlzdC9zZXJ2ZXIvcm91dGUtbW9kdWxlcy9wYWdlcy1hcGkvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9yb3V0ZS1raW5kXCI7XG5pbXBvcnQgeyBob2lzdCB9IGZyb20gXCJuZXh0L2Rpc3QvYnVpbGQvdGVtcGxhdGVzL2hlbHBlcnNcIjtcbi8vIEltcG9ydCB0aGUgdXNlcmxhbmQgY29kZS5cbmltcG9ydCAqIGFzIHVzZXJsYW5kIGZyb20gXCIuL3NyYy9wYWdlcy9hcGkvYWNoaWV2ZW1lbnRzLnRzXCI7XG4vLyBSZS1leHBvcnQgdGhlIGhhbmRsZXIgKHNob3VsZCBiZSB0aGUgZGVmYXVsdCBleHBvcnQpLlxuZXhwb3J0IGRlZmF1bHQgaG9pc3QodXNlcmxhbmQsICdkZWZhdWx0Jyk7XG4vLyBSZS1leHBvcnQgY29uZmlnLlxuZXhwb3J0IGNvbnN0IGNvbmZpZyA9IGhvaXN0KHVzZXJsYW5kLCAnY29uZmlnJyk7XG4vLyBDcmVhdGUgYW5kIGV4cG9ydCB0aGUgcm91dGUgbW9kdWxlIHRoYXQgd2lsbCBiZSBjb25zdW1lZC5cbmV4cG9ydCBjb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBQYWdlc0FQSVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5QQUdFU19BUEksXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9hY2hpZXZlbWVudHNcIixcbiAgICAgICAgcGF0aG5hbWU6IFwiL2FwaS9hY2hpZXZlbWVudHNcIixcbiAgICAgICAgLy8gVGhlIGZvbGxvd2luZyBhcmVuJ3QgdXNlZCBpbiBwcm9kdWN0aW9uLlxuICAgICAgICBidW5kbGVQYXRoOiAnJyxcbiAgICAgICAgZmlsZW5hbWU6ICcnXG4gICAgfSxcbiAgICB1c2VybGFuZFxufSk7XG5cbi8vIyBzb3VyY2VNYXBwaW5nVVJMPXBhZ2VzLWFwaS5qcy5tYXAiXSwibmFtZXMiOltdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fachievements&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fachievements.ts&middlewareConfigBase64=e30%3D!\n");

/***/ }),

/***/ "(api-node)/./src/lib/db.ts":
/*!***********************!*\
  !*** ./src/lib/db.ts ***!
  \***********************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   closeDatabase: () => (/* binding */ closeDatabase),\n/* harmony export */   connectToDatabase: () => (/* binding */ connectToDatabase),\n/* harmony export */   generateAnonymousId: () => (/* binding */ generateAnonymousId),\n/* harmony export */   initializeDatabase: () => (/* binding */ initializeDatabase)\n/* harmony export */ });\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! mongodb */ \"mongodb\");\n/* harmony import */ var mongodb__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(mongodb__WEBPACK_IMPORTED_MODULE_0__);\n\n// Connection URI\nconst uri = process.env.MONGODB_URI || 'mongodb://localhost:27017/oleksiakConsult';\n// MongoDB connection cache\nlet cachedClient = null;\nlet cachedDb = null;\n// Connection options\nconst options = {\n    maxPoolSize: 10,\n    serverSelectionTimeoutMS: 5000,\n    socketTimeoutMS: 45000\n};\n// Function to connect to MongoDB\nasync function connectToDatabase() {\n    // If we have cached connections, use them\n    if (cachedClient && cachedDb) {\n        return {\n            client: cachedClient,\n            db: cachedDb\n        };\n    }\n    try {\n        // Connect to MongoDB\n        const client = await mongodb__WEBPACK_IMPORTED_MODULE_0__.MongoClient.connect(uri, options);\n        const db = client.db();\n        // Cache connections\n        cachedClient = client;\n        cachedDb = db;\n        // Return connections\n        return {\n            client,\n            db\n        };\n    } catch (error) {\n        console.error('Failed to connect to MongoDB:', error);\n        // Return mock client and db for development\n        return {\n            client: null,\n            db: {\n                collection: ()=>({\n                        findOne: async ()=>null,\n                        find: async ()=>({\n                                toArray: async ()=>[]\n                            }),\n                        insertOne: async ()=>({\n                                acknowledged: true,\n                                insertedId: 'mock-id'\n                            }),\n                        updateOne: async ()=>({\n                                acknowledged: true,\n                                modifiedCount: 1\n                            })\n                    })\n            }\n        };\n    }\n}\n// Function to close MongoDB connection (useful for tests)\nasync function closeDatabase() {\n    if (cachedClient) {\n        await cachedClient.close();\n        cachedClient = null;\n        cachedDb = null;\n    }\n}\n// Create a unique ID for anonymous users\nfunction generateAnonymousId() {\n    return 'anon_' + Math.random().toString(36).substring(2, 15) + Math.random().toString(36).substring(2, 15);\n}\n// Initialize database collections if needed\nasync function initializeDatabase() {\n    try {\n        const { db } = await connectToDatabase();\n        // Create collections if they don't exist\n        const collections = await db.listCollections().toArray();\n        const collectionNames = collections.map((c)=>c.name);\n        // Define required collections\n        const requiredCollections = [\n            'users',\n            'achievements',\n            'newsletterSubscribers',\n            'blogPosts'\n        ];\n        // Create missing collections\n        for (const collection of requiredCollections){\n            if (!collectionNames.includes(collection)) {\n                await db.createCollection(collection);\n                console.log(`Created collection: ${collection}`);\n            }\n        }\n        // Create indexes for performance\n        await db.collection('users').createIndex({\n            userId: 1\n        }, {\n            unique: true\n        });\n        await db.collection('newsletterSubscribers').createIndex({\n            email: 1\n        }, {\n            unique: true\n        });\n        await db.collection('blogPosts').createIndex({\n            slug: 1\n        }, {\n            unique: true\n        });\n        console.log('Database initialized successfully');\n    } catch (error) {\n        console.error('Error initializing database:', error);\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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LFFBQVEyQixHQUFHLENBQUM7SUFDZCxFQUFFLE9BQU81QixPQUFPO1FBQ2RDLFFBQVFELEtBQUssQ0FBQyxnQ0FBZ0NBO0lBQ2hEO0FBQ0YiLCJzb3VyY2VzIjpbIi9ob21lL3J1bm5lci93b3Jrc3BhY2Uvc3JjL2xpYi9kYi50cyJdLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQgeyBNb25nb0NsaWVudCwgRGIgfSBmcm9tICdtb25nb2RiJztcblxuLy8gQ29ubmVjdGlvbiBVUklcbmNvbnN0IHVyaSA9IHByb2Nlc3MuZW52Lk1PTkdPREJfVVJJIHx8ICdtb25nb2RiOi8vbG9jYWxob3N0OjI3MDE3L29sZWtzaWFrQ29uc3VsdCc7XG5cbi8vIE1vbmdvREIgY29ubmVjdGlvbiBjYWNoZVxubGV0IGNhY2hlZENsaWVudDogTW9uZ29DbGllbnQgfCBudWxsID0gbnVsbDtcbmxldCBjYWNoZWREYjogRGIgfCBudWxsID0gbnVsbDtcblxuLy8gQ29ubmVjdGlvbiBvcHRpb25zXG5jb25zdCBvcHRpb25zID0ge1xuICBtYXhQb29sU2l6ZTogMTAsXG4gIHNlcnZlclNlbGVjdGlvblRpbWVvdXRNUzogNTAwMCxcbiAgc29ja2V0VGltZW91dE1TOiA0NTAwMCxcbn07XG5cbi8vIEZ1bmN0aW9uIHRvIGNvbm5lY3QgdG8gTW9uZ29EQlxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGNvbm5lY3RUb0RhdGFiYXNlKCkge1xuICAvLyBJZiB3ZSBoYXZlIGNhY2hlZCBjb25uZWN0aW9ucywgdXNlIHRoZW1cbiAgaWYgKGNhY2hlZENsaWVudCAmJiBjYWNoZWREYikge1xuICAgIHJldHVybiB7IGNsaWVudDogY2FjaGVkQ2xpZW50LCBkYjogY2FjaGVkRGIgfTtcbiAgfVxuXG4gIHRyeSB7XG4gICAgLy8gQ29ubmVjdCB0byBNb25nb0RCXG4gICAgY29uc3QgY2xpZW50ID0gYXdhaXQgTW9uZ29DbGllbnQuY29ubmVjdCh1cmksIG9wdGlvbnMpO1xuICAgIGNvbnN0IGRiID0gY2xpZW50LmRiKCk7XG5cbiAgICAvLyBDYWNoZSBjb25uZWN0aW9uc1xuICAgIGNhY2hlZENsaWVudCA9IGNsaWVudDtcbiAgICBjYWNoZWREYiA9IGRiO1xuXG4gICAgLy8gUmV0dXJuIGNvbm5lY3Rpb25zXG4gICAgcmV0dXJuIHsgY2xpZW50LCBkYiB9O1xuICB9IGNhdGNoIChlcnJvcikge1xuICAgIGNvbnNvbGUuZXJyb3IoJ0ZhaWxlZCB0byBjb25uZWN0IHRvIE1vbmdvREI6JywgZXJyb3IpO1xuICAgIC8vIFJldHVybiBtb2NrIGNsaWVudCBhbmQgZGIgZm9yIGRldmVsb3BtZW50XG4gICAgcmV0dXJuIHsgXG4gICAgICBjbGllbnQ6IG51bGwsIFxuICAgICAgZGI6IHtcbiAgICAgICAgY29sbGVjdGlvbjogKCkgPT4gKHtcbiAgICAgICAgICBmaW5kT25lOiBhc3luYyAoKSA9PiBudWxsLFxuICAgICAgICAgIGZpbmQ6IGFzeW5jICgpID0+ICh7IHRvQXJyYXk6IGFzeW5jICgpID0+IFtdIH0pLFxuICAgICAgICAgIGluc2VydE9uZTogYXN5bmMgKCkgPT4gKHsgYWNrbm93bGVkZ2VkOiB0cnVlLCBpbnNlcnRlZElkOiAnbW9jay1pZCcgfSksXG4gICAgICAgICAgdXBkYXRlT25lOiBhc3luYyAoKSA9PiAoeyBhY2tub3dsZWRnZWQ6IHRydWUsIG1vZGlmaWVkQ291bnQ6IDEgfSlcbiAgICAgICAgfSlcbiAgICAgIH0gXG4gICAgfTtcbiAgfVxufVxuXG4vLyBGdW5jdGlvbiB0byBjbG9zZSBNb25nb0RCIGNvbm5lY3Rpb24gKHVzZWZ1bCBmb3IgdGVzdHMpXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gY2xvc2VEYXRhYmFzZSgpIHtcbiAgaWYgKGNhY2hlZENsaWVudCkge1xuICAgIGF3YWl0IGNhY2hlZENsaWVudC5jbG9zZSgpO1xuICAgIGNhY2hlZENsaWVudCA9IG51bGw7XG4gICAgY2FjaGVkRGIgPSBudWxsO1xuICB9XG59XG5cbi8vIENyZWF0ZSBhIHVuaXF1ZSBJRCBmb3IgYW5vbnltb3VzIHVzZXJzXG5leHBvcnQgZnVuY3Rpb24gZ2VuZXJhdGVBbm9ueW1vdXNJZCgpIHtcbiAgcmV0dXJuICdhbm9uXycgKyBNYXRoLnJhbmRvbSgpLnRvU3RyaW5nKDM2KS5zdWJzdHJpbmcoMiwgMTUpICsgTWF0aC5yYW5kb20oKS50b1N0cmluZygzNikuc3Vic3RyaW5nKDIsIDE1KTtcbn1cblxuLy8gSW5pdGlhbGl6ZSBkYXRhYmFzZSBjb2xsZWN0aW9ucyBpZiBuZWVkZWRcbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBpbml0aWFsaXplRGF0YWJhc2UoKSB7XG4gIHRyeSB7XG4gICAgY29uc3QgeyBkYiB9ID0gYXdhaXQgY29ubmVjdFRvRGF0YWJhc2UoKTtcbiAgICBcbiAgICAvLyBDcmVhdGUgY29sbGVjdGlvbnMgaWYgdGhleSBkb24ndCBleGlzdFxuICAgIGNvbnN0IGNvbGxlY3Rpb25zID0gYXdhaXQgZGIubGlzdENvbGxlY3Rpb25zKCkudG9BcnJheSgpO1xuICAgIGNvbnN0IGNvbGxlY3Rpb25OYW1lcyA9IGNvbGxlY3Rpb25zLm1hcChjID0+IGMubmFtZSk7XG4gICAgXG4gICAgLy8gRGVmaW5lIHJlcXVpcmVkIGNvbGxlY3Rpb25zXG4gICAgY29uc3QgcmVxdWlyZWRDb2xsZWN0aW9ucyA9IFtcbiAgICAgICd1c2VycycsXG4gICAgICAnYWNoaWV2ZW1lbnRzJyxcbiAgICAgICduZXdzbGV0dGVyU3Vic2NyaWJlcnMnLFxuICAgICAgJ2Jsb2dQb3N0cydcbiAgICBdO1xuICAgIFxuICAgIC8vIENyZWF0ZSBtaXNzaW5nIGNvbGxlY3Rpb25zXG4gICAgZm9yIChjb25zdCBjb2xsZWN0aW9uIG9mIHJlcXVpcmVkQ29sbGVjdGlvbnMpIHtcbiAgICAgIGlmICghY29sbGVjdGlvbk5hbWVzLmluY2x1ZGVzKGNvbGxlY3Rpb24pKSB7XG4gICAgICAgIGF3YWl0IGRiLmNyZWF0ZUNvbGxlY3Rpb24oY29sbGVjdGlvbik7XG4gICAgICAgIGNvbnNvbGUubG9nKGBDcmVhdGVkIGNvbGxlY3Rpb246ICR7Y29sbGVjdGlvbn1gKTtcbiAgICAgIH1cbiAgICB9XG4gICAgXG4gICAgLy8gQ3JlYXRlIGluZGV4ZXMgZm9yIHBlcmZvcm1hbmNlXG4gICAgYXdhaXQgZGIuY29sbGVjdGlvbigndXNlcnMnKS5jcmVhdGVJbmRleCh7IHVzZXJJZDogMSB9LCB7IHVuaXF1ZTogdHJ1ZSB9KTtcbiAgICBhd2FpdCBkYi5jb2xsZWN0aW9uKCduZXdzbGV0dGVyU3Vic2NyaWJlcnMnKS5jcmVhdGVJbmRleCh7IGVtYWlsOiAxIH0sIHsgdW5pcXVlOiB0cnVlIH0pO1xuICAgIGF3YWl0IGRiLmNvbGxlY3Rpb24oJ2Jsb2dQb3N0cycpLmNyZWF0ZUluZGV4KHsgc2x1ZzogMSB9LCB7IHVuaXF1ZTogdHJ1ZSB9KTtcbiAgICBcbiAgICBjb25zb2xlLmxvZygnRGF0YWJhc2UgaW5pdGlhbGl6ZWQgc3VjY2Vzc2Z1bGx5Jyk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgaW5pdGlhbGl6aW5nIGRhdGFiYXNlOicsIGVycm9yKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIk1vbmdvQ2xpZW50IiwidXJpIiwicHJvY2VzcyIsImVudiIsIk1PTkdPREJfVVJJIiwiY2FjaGVkQ2xpZW50IiwiY2FjaGVkRGIiLCJvcHRpb25zIiwibWF4UG9vbFNpemUiLCJzZXJ2ZXJTZWxlY3Rpb25UaW1lb3V0TVMiLCJzb2NrZXRUaW1lb3V0TVMiLCJjb25uZWN0VG9EYXRhYmFzZSIsImNsaWVudCIsImRiIiwiY29ubmVjdCIsImVycm9yIiwiY29uc29sZSIsImNvbGxlY3Rpb24iLCJmaW5kT25lIiwiZmluZCIsInRvQXJyYXkiLCJpbnNlcnRPbmUiLCJhY2tub3dsZWRnZWQiLCJpbnNlcnRlZElkIiwidXBkYXRlT25lIiwibW9kaWZpZWRDb3VudCIsImNsb3NlRGF0YWJhc2UiLCJjbG9zZSIsImdlbmVyYXRlQW5vbnltb3VzSWQiLCJNYXRoIiwicmFuZG9tIiwidG9TdHJpbmciLCJzdWJzdHJpbmciLCJpbml0aWFsaXplRGF0YWJhc2UiLCJjb2xsZWN0aW9ucyIsImxpc3RDb2xsZWN0aW9ucyIsImNvbGxlY3Rpb25OYW1lcyIsIm1hcCIsImMiLCJuYW1lIiwicmVxdWlyZWRDb2xsZWN0aW9ucyIsImluY2x1ZGVzIiwiY3JlYXRlQ29sbGVjdGlvbiIsImxvZyIsImNyZWF0ZUluZGV4IiwidXNlcklkIiwidW5pcXVlIiwiZW1haWwiLCJzbHVnIl0sImlnbm9yZUxpc3QiOltdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(api-node)/./src/lib/db.ts\n");

/***/ }),

/***/ "(api-node)/./src/pages/api/achievements.ts":
/*!***************************************!*\
  !*** ./src/pages/api/achievements.ts ***!
  \***************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   \"default\": () => (/* binding */ handler)\n/* harmony export */ });\n/* harmony import */ var _lib_db__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @/lib/db */ \"(api-node)/./src/lib/db.ts\");\n\nasync function handler(req, res) {\n    if (req.method !== 'POST') {\n        return res.status(405).json({\n            message: 'Method Not Allowed'\n        });\n    }\n    try {\n        const { userId, achievements, progress } = req.body;\n        if (!userId || !achievements || !progress) {\n            return res.status(400).json({\n                message: 'Missing required fields'\n            });\n        }\n        const { db } = await (0,_lib_db__WEBPACK_IMPORTED_MODULE_0__.connectToDatabase)();\n        // Check if user exists\n        try {\n            const existingUser = await db.collection('users').findOne({\n                userId\n            });\n            if (!existingUser) {\n                // Create new user with achievements\n                await db.collection('users').insertOne({\n                    userId,\n                    createdAt: new Date(),\n                    lastActive: new Date(),\n                    achievements,\n                    progress\n                });\n            } else {\n                // Update existing user achievements\n                await db.collection('users').updateOne({\n                    userId\n                }, {\n                    $set: {\n                        achievements,\n                        lastActive: new Date(),\n                        progress\n                    }\n                });\n            }\n        } catch (error) {\n            console.log('Error updating achievements:', error);\n        // Continue with the API response even if database update fails\n        }\n        // Determine achievement level based on progress\n        let level = 'Explorer';\n        if (progress >= 33.3 && progress < 66.6) {\n            level = 'Strategist';\n        } else if (progress >= 66.6) {\n            level = 'Partner';\n        }\n        return res.status(200).json({\n            success: true,\n            level,\n            progress\n        });\n    } catch (error) {\n        console.error('Error updating achievements:', error);\n        return res.status(500).json({\n            message: 'Internal Server Error'\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKGFwaS1ub2RlKS8uL3NyYy9wYWdlcy9hcGkvYWNoaWV2ZW1lbnRzLnRzIiwibWFwcGluZ3MiOiI7Ozs7O0FBQzZDO0FBRTlCLGVBQWVDLFFBQVFDLEdBQW1CLEVBQUVDLEdBQW9CO0lBQzdFLElBQUlELElBQUlFLE1BQU0sS0FBSyxRQUFRO1FBQ3pCLE9BQU9ELElBQUlFLE1BQU0sQ0FBQyxLQUFLQyxJQUFJLENBQUM7WUFBRUMsU0FBUztRQUFxQjtJQUM5RDtJQUVBLElBQUk7UUFDRixNQUFNLEVBQUVDLE1BQU0sRUFBRUMsWUFBWSxFQUFFQyxRQUFRLEVBQUUsR0FBR1IsSUFBSVMsSUFBSTtRQUVuRCxJQUFJLENBQUNILFVBQVUsQ0FBQ0MsZ0JBQWdCLENBQUNDLFVBQVU7WUFDekMsT0FBT1AsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztnQkFBRUMsU0FBUztZQUEwQjtRQUNuRTtRQUVBLE1BQU0sRUFBRUssRUFBRSxFQUFFLEdBQUcsTUFBTVosMERBQWlCQTtRQUV0Qyx1QkFBdUI7UUFDdkIsSUFBSTtZQUNGLE1BQU1hLGVBQWUsTUFBTUQsR0FBR0UsVUFBVSxDQUFDLFNBQVNDLE9BQU8sQ0FBQztnQkFBRVA7WUFBTztZQUVuRSxJQUFJLENBQUNLLGNBQWM7Z0JBQ2pCLG9DQUFvQztnQkFDcEMsTUFBTUQsR0FBR0UsVUFBVSxDQUFDLFNBQVNFLFNBQVMsQ0FBQztvQkFDckNSO29CQUNBUyxXQUFXLElBQUlDO29CQUNmQyxZQUFZLElBQUlEO29CQUNoQlQ7b0JBQ0FDO2dCQUNGO1lBQ0YsT0FBTztnQkFDTCxvQ0FBb0M7Z0JBQ3BDLE1BQU1FLEdBQUdFLFVBQVUsQ0FBQyxTQUFTTSxTQUFTLENBQ3BDO29CQUFFWjtnQkFBTyxHQUNUO29CQUNFYSxNQUFNO3dCQUNKWjt3QkFDQVUsWUFBWSxJQUFJRDt3QkFDaEJSO29CQUNGO2dCQUNGO1lBRUo7UUFDRixFQUFFLE9BQU9ZLE9BQU87WUFDZEMsUUFBUUMsR0FBRyxDQUFDLGdDQUFnQ0Y7UUFDNUMsK0RBQStEO1FBQ2pFO1FBRUEsZ0RBQWdEO1FBQ2hELElBQUlHLFFBQVE7UUFDWixJQUFJZixZQUFZLFFBQVFBLFdBQVcsTUFBTTtZQUN2Q2UsUUFBUTtRQUNWLE9BQU8sSUFBSWYsWUFBWSxNQUFNO1lBQzNCZSxRQUFRO1FBQ1Y7UUFFQSxPQUFPdEIsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUMxQm9CLFNBQVM7WUFDVEQ7WUFDQWY7UUFDRjtJQUNGLEVBQUUsT0FBT1ksT0FBTztRQUNkQyxRQUFRRCxLQUFLLENBQUMsZ0NBQWdDQTtRQUM5QyxPQUFPbkIsSUFBSUUsTUFBTSxDQUFDLEtBQUtDLElBQUksQ0FBQztZQUFFQyxTQUFTO1FBQXdCO0lBQ2pFO0FBQ0YiLCJzb3VyY2VzIjpbIi9ob21lL3J1bm5lci93b3Jrc3BhY2Uvc3JjL3BhZ2VzL2FwaS9hY2hpZXZlbWVudHMudHMiXSwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgTmV4dEFwaVJlcXVlc3QsIE5leHRBcGlSZXNwb25zZSB9IGZyb20gJ25leHQnO1xuaW1wb3J0IHsgY29ubmVjdFRvRGF0YWJhc2UgfSBmcm9tICdAL2xpYi9kYic7XG5cbmV4cG9ydCBkZWZhdWx0IGFzeW5jIGZ1bmN0aW9uIGhhbmRsZXIocmVxOiBOZXh0QXBpUmVxdWVzdCwgcmVzOiBOZXh0QXBpUmVzcG9uc2UpIHtcbiAgaWYgKHJlcS5tZXRob2QgIT09ICdQT1NUJykge1xuICAgIHJldHVybiByZXMuc3RhdHVzKDQwNSkuanNvbih7IG1lc3NhZ2U6ICdNZXRob2QgTm90IEFsbG93ZWQnIH0pO1xuICB9XG5cbiAgdHJ5IHtcbiAgICBjb25zdCB7IHVzZXJJZCwgYWNoaWV2ZW1lbnRzLCBwcm9ncmVzcyB9ID0gcmVxLmJvZHk7XG5cbiAgICBpZiAoIXVzZXJJZCB8fCAhYWNoaWV2ZW1lbnRzIHx8ICFwcm9ncmVzcykge1xuICAgICAgcmV0dXJuIHJlcy5zdGF0dXMoNDAwKS5qc29uKHsgbWVzc2FnZTogJ01pc3NpbmcgcmVxdWlyZWQgZmllbGRzJyB9KTtcbiAgICB9XG5cbiAgICBjb25zdCB7IGRiIH0gPSBhd2FpdCBjb25uZWN0VG9EYXRhYmFzZSgpO1xuXG4gICAgLy8gQ2hlY2sgaWYgdXNlciBleGlzdHNcbiAgICB0cnkge1xuICAgICAgY29uc3QgZXhpc3RpbmdVc2VyID0gYXdhaXQgZGIuY29sbGVjdGlvbigndXNlcnMnKS5maW5kT25lKHsgdXNlcklkIH0pO1xuXG4gICAgICBpZiAoIWV4aXN0aW5nVXNlcikge1xuICAgICAgICAvLyBDcmVhdGUgbmV3IHVzZXIgd2l0aCBhY2hpZXZlbWVudHNcbiAgICAgICAgYXdhaXQgZGIuY29sbGVjdGlvbigndXNlcnMnKS5pbnNlcnRPbmUoe1xuICAgICAgICAgIHVzZXJJZCxcbiAgICAgICAgICBjcmVhdGVkQXQ6IG5ldyBEYXRlKCksXG4gICAgICAgICAgbGFzdEFjdGl2ZTogbmV3IERhdGUoKSxcbiAgICAgICAgICBhY2hpZXZlbWVudHMsXG4gICAgICAgICAgcHJvZ3Jlc3NcbiAgICAgICAgfSk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICAvLyBVcGRhdGUgZXhpc3RpbmcgdXNlciBhY2hpZXZlbWVudHNcbiAgICAgICAgYXdhaXQgZGIuY29sbGVjdGlvbigndXNlcnMnKS51cGRhdGVPbmUoXG4gICAgICAgICAgeyB1c2VySWQgfSxcbiAgICAgICAgICB7IFxuICAgICAgICAgICAgJHNldDogeyBcbiAgICAgICAgICAgICAgYWNoaWV2ZW1lbnRzLFxuICAgICAgICAgICAgICBsYXN0QWN0aXZlOiBuZXcgRGF0ZSgpLFxuICAgICAgICAgICAgICBwcm9ncmVzc1xuICAgICAgICAgICAgfSBcbiAgICAgICAgICB9XG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfSBjYXRjaCAoZXJyb3IpIHtcbiAgICAgIGNvbnNvbGUubG9nKCdFcnJvciB1cGRhdGluZyBhY2hpZXZlbWVudHM6JywgZXJyb3IpO1xuICAgICAgLy8gQ29udGludWUgd2l0aCB0aGUgQVBJIHJlc3BvbnNlIGV2ZW4gaWYgZGF0YWJhc2UgdXBkYXRlIGZhaWxzXG4gICAgfVxuXG4gICAgLy8gRGV0ZXJtaW5lIGFjaGlldmVtZW50IGxldmVsIGJhc2VkIG9uIHByb2dyZXNzXG4gICAgbGV0IGxldmVsID0gJ0V4cGxvcmVyJztcbiAgICBpZiAocHJvZ3Jlc3MgPj0gMzMuMyAmJiBwcm9ncmVzcyA8IDY2LjYpIHtcbiAgICAgIGxldmVsID0gJ1N0cmF0ZWdpc3QnO1xuICAgIH0gZWxzZSBpZiAocHJvZ3Jlc3MgPj0gNjYuNikge1xuICAgICAgbGV2ZWwgPSAnUGFydG5lcic7XG4gICAgfVxuXG4gICAgcmV0dXJuIHJlcy5zdGF0dXMoMjAwKS5qc29uKHsgXG4gICAgICBzdWNjZXNzOiB0cnVlLCBcbiAgICAgIGxldmVsLFxuICAgICAgcHJvZ3Jlc3MgXG4gICAgfSk7XG4gIH0gY2F0Y2ggKGVycm9yKSB7XG4gICAgY29uc29sZS5lcnJvcignRXJyb3IgdXBkYXRpbmcgYWNoaWV2ZW1lbnRzOicsIGVycm9yKTtcbiAgICByZXR1cm4gcmVzLnN0YXR1cyg1MDApLmpzb24oeyBtZXNzYWdlOiAnSW50ZXJuYWwgU2VydmVyIEVycm9yJyB9KTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbImNvbm5lY3RUb0RhdGFiYXNlIiwiaGFuZGxlciIsInJlcSIsInJlcyIsIm1ldGhvZCIsInN0YXR1cyIsImpzb24iLCJtZXNzYWdlIiwidXNlcklkIiwiYWNoaWV2ZW1lbnRzIiwicHJvZ3Jlc3MiLCJib2R5IiwiZGIiLCJleGlzdGluZ1VzZXIiLCJjb2xsZWN0aW9uIiwiZmluZE9uZSIsImluc2VydE9uZSIsImNyZWF0ZWRBdCIsIkRhdGUiLCJsYXN0QWN0aXZlIiwidXBkYXRlT25lIiwiJHNldCIsImVycm9yIiwiY29uc29sZSIsImxvZyIsImxldmVsIiwic3VjY2VzcyJdLCJpZ25vcmVMaXN0IjpbXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(api-node)/./src/pages/api/achievements.ts\n");

/***/ }),

/***/ "mongodb":
/*!**************************!*\
  !*** external "mongodb" ***!
  \**************************/
/***/ ((module) => {

module.exports = require("mongodb");

/***/ }),

/***/ "next/dist/compiled/next-server/pages-api.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/pages-api.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/pages-api.runtime.dev.js");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../webpack-api-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/next"], () => (__webpack_exec__("(api-node)/./node_modules/next/dist/build/webpack/loaders/next-route-loader/index.js?kind=PAGES_API&page=%2Fapi%2Fachievements&preferredRegion=&absolutePagePath=.%2Fsrc%2Fpages%2Fapi%2Fachievements.ts&middlewareConfigBase64=e30%3D!")));
module.exports = __webpack_exports__;

})();